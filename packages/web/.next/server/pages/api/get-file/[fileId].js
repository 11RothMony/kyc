"use strict";(()=>{var e={};e.id=743,e.ids=[743],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},9098:(e,r,i)=>{i.r(r),i.d(r,{config:()=>f,default:()=>p,routeModule:()=>c});var t={};i.r(t),i.d(t,{default:()=>handler});var a=i(9150),s=i(1631),o=i(6835),l=i(7147),n=i(1017),d=i.n(n);let u=d().join(process.cwd(),"uploads");async function handler(e,r){if("GET"!==e.method)return r.status(405).json({error:"Method not allowed"});let{fileId:i}=e.query;if(!i||"string"!=typeof i)return r.status(400).json({error:"Invalid file ID"});try{let e=d().join(u,`${i}.json`),t=await l.promises.readFile(e,"utf-8"),a=JSON.parse(t),s=a.filePath;await l.promises.access(s);let o=await l.promises.readFile(s),n=o.toString("base64"),p=`data:${a.mimetype};base64,${n}`;r.status(200).json({success:!0,fileId:a.fileId,filename:a.originalName,size:a.size,mimetype:a.mimetype,dataUrl:p,uploadTime:a.uploadTime})}catch(e){console.error("File retrieval error:",e),r.status(404).json({success:!1,error:"File not found or expired"})}}let p=(0,o.l)(t,"default"),f=(0,o.l)(t,"config"),c=new a.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/get-file/[fileId]",pathname:"/api/get-file/[fileId]",bundlePath:"",filename:""},userland:t})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),i=r.X(0,[471],()=>__webpack_exec__(9098));module.exports=i})();