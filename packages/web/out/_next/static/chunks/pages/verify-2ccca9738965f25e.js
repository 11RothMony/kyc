(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{8362:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify",function(){return a(1161)}])},3134:function(e,t,a){"use strict";a.d(t,{z:function(){return o}});var r=a(2322),s=a(2784),i=a(929),n=a(454);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:o=!1,...c}=e;return(0,r.jsx)("button",{className:(0,n.cn)(l({variant:s,size:i,className:a})),ref:t,...c})});o.displayName="Button"},7141:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return n},aY:function(){return d},ll:function(){return o}});var r=a(2322),s=a(2784),i=a(454);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});n.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},5158:function(e,t,a){"use strict";a.d(t,{Y:function(){return getIDCardFormat}});let r=[{name:"US Driver License",country:"US",patterns:{name:[/^([A-Z\s]+),?\s+([A-Z\s]+)$/i,/^([A-Z]+)\s+([A-Z\s]+)$/i,/LN[:\s]+([A-Z\s]+)/i,/FN[:\s]+([A-Z\s]+)/i],dateOfBirth:[/DOB[:\s]+(\d{1,2}[-/]\d{1,2}[-/]\d{2,4})/i,/(\d{1,2}[-/]\d{1,2}[-/]\d{2,4})/,/BIRTH[:\s]+(\d{1,2}[-/]\d{1,2}[-/]\d{2,4})/i],idNumber:[/DL[:\s]+([A-Z0-9]+)/i,/LIC[:\s]+([A-Z0-9]+)/i,/ID[:\s]+([A-Z0-9]+)/i],expiryDate:[/EXP[:\s]+(\d{1,2}[-/]\d{1,2}[-/]\d{2,4})/i,/EXPIRES[:\s]+(\d{1,2}[-/]\d{1,2}[-/]\d{2,4})/i],gender:[/SEX[:\s]+([MF])/i,/GENDER[:\s]+([MF])/i]},dateFormats:["MM/DD/YYYY","MM-DD-YYYY","MM/DD/YY","MM-DD-YY"],keywords:{name:["NAME","LN","FN","LAST NAME","FIRST NAME"],dateOfBirth:["DOB","DATE OF BIRTH","BIRTH"],idNumber:["DL","LIC","LICENSE","ID"],expiryDate:["EXP","EXPIRES","EXPIRY"],gender:["SEX","GENDER"]}},{name:"UK Passport",country:"GB",patterns:{name:[/^([A-Z\s]+)\s+([A-Z\s]+)$/i,/SURNAME[:\s]+([A-Z\s]+)/i,/GIVEN NAMES[:\s]+([A-Z\s]+)/i],dateOfBirth:[/DATE OF BIRTH[:\s]+(\d{1,2}\s+[A-Z]{3}\s+\d{4})/i,/(\d{1,2}\s+[A-Z]{3}\s+\d{4})/],documentNumber:[/PASSPORT NO[:\s]+([A-Z0-9]+)/i,/([A-Z0-9]{9})/],nationality:[/NATIONALITY[:\s]+([A-Z]+)/i,/BRITISH CITIZEN/i],gender:[/SEX[:\s]+([MF])/i]},dateFormats:["DD MMM YYYY","DD/MM/YYYY","DD-MM-YYYY"],keywords:{name:["SURNAME","GIVEN NAMES","NAME"],dateOfBirth:["DATE OF BIRTH","DOB"],documentNumber:["PASSPORT NO","DOCUMENT NO"],nationality:["NATIONALITY"],gender:["SEX"]}},{name:"Generic ID Card",country:"GENERIC",patterns:{name:[/NAME[:\s]+([A-Z\s]+)/i,/^([A-Z\s]+),?\s+([A-Z\s]+)$/i],dateOfBirth:[/DOB[:\s]+(\d{1,2}[-/]\d{1,2}[-/]\d{2,4})/i,/BIRTH[:\s]+(\d{1,2}[-/]\d{1,2}[-/]\d{2,4})/i,/(\d{1,2}[-/]\d{1,2}[-/]\d{2,4})/],idNumber:[/ID[:\s]+([A-Z0-9]+)/i,/NUMBER[:\s]+([A-Z0-9]+)/i,/([A-Z0-9]{6,})/],expiryDate:[/EXPIRES[:\s]+(\d{1,2}[-/]\d{1,2}[-/]\d{2,4})/i,/EXPIRY[:\s]+(\d{1,2}[-/]\d{1,2}[-/]\d{2,4})/i]},dateFormats:["DD/MM/YYYY","MM/DD/YYYY","YYYY-MM-DD","DD-MM-YYYY"],keywords:{name:["NAME","FULL NAME"],dateOfBirth:["DOB","DATE OF BIRTH","BIRTH"],idNumber:["ID","NUMBER","CARD NUMBER"],expiryDate:["EXPIRES","EXPIRY","VALID UNTIL"]}}];function getIDCardFormat(e){for(let t of r){let a=0;if(Object.values(t.keywords).flat().forEach(t=>{e.toUpperCase().includes(t.toUpperCase())&&(a+=1)}),a>=3)return t}let t=r.find(e=>"GENERIC"===e.country);return t||r[0]}},4575:function(e,t,a){"use strict";a.d(t,{MockOCRService:function(){return MockOCRService}});var r=a(5158);let MockOCRService=class MockOCRService{async extractText(e){await this.delay(1e3+2e3*Math.random());let t=["DRIVER LICENSE\nJOHN SMITH\nDOB: 01/15/1990\nDL: A1234567\nEXP: 01/15/2028\nSEX: M\nCLASS: C","PASSPORT\nSURNAME: JOHNSON\nGIVEN NAMES: SARAH MARIE\nDATE OF BIRTH: 25 JUN 1985\nPASSPORT NO: 123456789\nNATIONALITY: BRITISH CITIZEN\nSEX: F","IDENTITY CARD\nNAME: MICHAEL BROWN\nDOB: 03/22/1988\nID: 987654321\nEXPIRES: 03/22/2030\nADDRESS: 123 MAIN ST\nCITY: ANYTOWN","NATIONAL ID\nFULL NAME: EMMA WILSON\nBIRTH: 12/08/1992\nNUMBER: ID123456789\nEXPIRY: 12/08/2032\nGENDER: F\nNATIONALITY: AMERICAN"],a=t[Math.floor(Math.random()*t.length)],r=a.split("\n"),s=r.map((e,t)=>({text:e,confidence:.8+.19*Math.random(),boundingBox:{left:.1+.1*Math.random(),top:.1+.1*t,width:.8+.1*Math.random(),height:.08}}));return{fullText:a,blocks:s,confidence:.85+.14*Math.random(),processingTime:1200+800*Math.random()}}async extractIDData(e){let t=await this.extractText(e),a=(0,r.Y)(t.fullText);return this.parseIDData(t,a)}parseIDData(e,t){let a=e.fullText.toUpperCase(),r={confidence:{overall:0},rawData:e},s=t.patterns.name||[];for(let e of s){let t=a.match(e);if(t){if(t[1]&&t[2])r.firstName=this.cleanText(t[2]),r.lastName=this.cleanText(t[1]),r.fullName="".concat(r.firstName," ").concat(r.lastName);else if(t[1]){r.fullName=this.cleanText(t[1]);let e=r.fullName.split(" ");e.length>=2&&(r.firstName=e[0],r.lastName=e.slice(1).join(" "))}r.confidence.firstName=.8+.19*Math.random(),r.confidence.lastName=.8+.19*Math.random();break}}let i=t.patterns.dateOfBirth||[];for(let e of i){let t=a.match(e);if(t&&t[1]){r.dateOfBirth=this.cleanText(t[1]),r.confidence.dateOfBirth=.8+.19*Math.random();break}}let n=t.patterns.idNumber||[];for(let e of n){let t=a.match(e);if(t&&t[1]){r.idNumber=this.cleanText(t[1]),r.confidence.idNumber=.8+.19*Math.random();break}}let l=t.patterns.documentNumber||[];for(let e of l){let t=a.match(e);if(t&&t[1]){r.documentNumber=this.cleanText(t[1]),r.confidence.documentNumber=.8+.19*Math.random();break}}let o=t.patterns.expiryDate||[];for(let e of o){let t=a.match(e);if(t&&t[1]){r.expiryDate=this.cleanText(t[1]);break}}let c=t.patterns.gender||[];for(let e of c){let t=a.match(e);if(t&&t[1]){r.gender="M"===t[1].toUpperCase()?"Male":"Female";break}}let d=t.patterns.nationality||[];for(let e of d){let t=a.match(e);if(t&&t[1]){r.nationality=this.cleanText(t[1]);break}}let u=Object.values(r.confidence).filter(e=>"number"==typeof e);return r.confidence.overall=u.length>0?u.reduce((e,t)=>e+t,0)/u.length:.5,r}cleanText(e){return e.trim().replace(/\s+/g," ").toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}validateExtractedData(e){let t=e.firstName&&e.lastName,a=e.dateOfBirth,r=e.idNumber||e.documentNumber,s=e.confidence.overall>=(this.config.confidenceThreshold||.7);return!!(t&&a&&r&&s)}delay(e){return new Promise(t=>setTimeout(t,e))}constructor(e){this.config={confidenceThreshold:.7,timeout:5e3,language:"eng",...e}}}},454:function(e,t,a){"use strict";a.d(t,{cn:function(){return cn}});var r=a(489),s=a(324);function cn(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}},1161:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Verify}});var r=a(2322),s=a(2784),i=a(7729),n=a.n(i),l=a(3134),o=a(454);let CameraService=class CameraService{static async takePhoto(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{if(this.isCapacitor())return await this.takeCapacitorPhoto(e);return await this.takeBrowserPhoto({width:e.width||640,height:e.height||480})}catch(e){return console.error("Camera error:",e),{success:!1,error:e instanceof Error?e.message:"Failed to access camera"}}}static isCapacitor(){return!!window.Capacitor}static async takeCapacitorPhoto(e){try{let{Camera:t,CameraResultType:r,CameraSource:s}=await a.e(849).then(a.bind(a,7849)),i=await t.getPhoto({quality:e.quality||90,allowEditing:e.allowEditing||!1,resultType:r.DataUrl,source:"gallery"===e.source?s.Photos:s.Camera,width:e.width,height:e.height});return{success:!0,imageData:i.dataUrl}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to take photo"}}}static async takeBrowserPhoto(e){return new Promise(e=>{e({success:!1,error:"Use AutoCamera component for browser camera access"})})}static async requestPermissions(){try{if(!this.isCapacitor())return!0;{let{Camera:e}=await a.e(849).then(a.bind(a,7849)),t=await e.requestPermissions();return"granted"===t.camera}}catch(e){return console.error("Permission request failed:",e),!1}}static async checkPermissions(){try{if(!this.isCapacitor())return!0;{let{Camera:e}=await a.e(849).then(a.bind(a,7849)),t=await e.checkPermissions();return"granted"===t.camera}}catch(e){return console.error("Permission check failed:",e),!1}}};function AutoCamera(e){let{onImageCapture:t,onCancel:a,autoStart:i=!0,className:n,disabled:c=!1,showPreview:d=!0,width:u=640,height:h=480}=e,[m,f]=(0,s.useState)(!1),[x,g]=(0,s.useState)(null),[p,v]=(0,s.useState)(null),[N,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),[w,k]=(0,s.useState)(!1),D=(0,s.useRef)(null),M=(0,s.useRef)(null),I=(0,s.useRef)(null),E=(0,s.useCallback)(async()=>{v(null),b(!0);try{let e=await CameraService.takePhoto({width:u,height:h,quality:90,source:"camera"});e.success&&e.imageData?(g(e.imageData),t(e.imageData)):v(e.error||"Failed to capture image")}catch(e){v(e instanceof Error?e.message:"Camera access failed")}finally{b(!1)}},[u,h,t]),C=(0,s.useCallback)(async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){v("Camera access not supported in this browser");return}v(null),b(!0),j(!1),f(!0);let e=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:u,min:320,max:1280},height:{ideal:h,min:240,max:720},facingMode:"user"},audio:!1});if(I.current=e,D.current){D.current.srcObject=e;let handleLoadedMetadata=()=>{D.current&&D.current.play().then(()=>{j(!0),b(!1)}).catch(e=>{console.error("Error playing video:",e),v("Unable to start video playback"),b(!1),f(!1)})};D.current.onloadedmetadata=handleLoadedMetadata,D.current.readyState>=1&&handleLoadedMetadata()}}catch(e){console.error("Error accessing camera:",e),b(!1),f(!1),"NotAllowedError"===e.name?v("Camera permission denied. Please allow camera access."):"NotFoundError"===e.name?v("Camera not found. Please check your camera."):v("Unable to access camera. Please try again.")}},[u,h]),S=(0,s.useCallback)(()=>{I.current&&(I.current.getTracks().forEach(e=>e.stop()),I.current=null),D.current&&(D.current.srcObject=null),f(!1),j(!1)},[]),A=(0,s.useCallback)(()=>{if(!D.current||!M.current||!y)return;let e=D.current,a=M.current,r=a.getContext("2d");if(r&&0!==e.videoWidth&&0!==e.videoHeight)try{a.width=e.videoWidth,a.height=e.videoHeight,r.drawImage(e,0,0,a.width,a.height);let s=a.toDataURL("image/jpeg",.9);g(s),t(s),S()}catch(e){console.error("Error capturing image:",e),v("Failed to capture image. Please try again.")}},[y,t,S]);(0,s.useEffect)(()=>{!i||m||x||w||C()},[i,m,x,C,w]),(0,s.useEffect)(()=>{(()=>{let e=!!window.Capacitor;k(e)})()},[]),(0,s.useEffect)(()=>()=>{S()},[S]);let T=(0,s.useCallback)(()=>{g(null),t(null),w||C()},[C,t,w]);return x&&d?(0,r.jsx)("div",{className:(0,o.cn)("w-full max-w-md mx-auto",n),children:(0,r.jsx)("div",{className:"relative border-2 border-dashed border-green-300 rounded-lg p-4 bg-green-50",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("img",{src:x,alt:"Captured face",className:"w-24 h-24 object-cover rounded-lg border-2 border-green-400"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Face captured successfully"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Comparing photo with ID card..."})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-green-600",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Processing verification..."]}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(l.z,{variant:"outline",size:"sm",onClick:w?()=>{g(null),t(null)}:T,disabled:c,children:w?"Take New Photo":"Retake"})})]})]})})}):(0,r.jsxs)("div",{className:(0,o.cn)("w-full max-w-md mx-auto",n),children:[(0,r.jsx)("div",{className:(0,o.cn)("relative border-2 border-dashed rounded-lg transition-all duration-200",m&&y?"border-green-400 bg-green-50":"border-gray-300",N&&"border-blue-400 bg-blue-50",p&&"border-red-400 bg-red-50"),children:m?(0,r.jsxs)("div",{className:"relative p-4",children:[(0,r.jsxs)("div",{className:"relative overflow-hidden rounded-lg",children:[(0,r.jsx)("video",{ref:D,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-64 object-cover rounded-lg",style:{backgroundColor:"#000",transform:"scaleX(-1)"}}),!y&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-lg",children:(0,r.jsxs)("div",{className:"text-white text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-sm",children:"Starting camera..."})]})}),y&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-52 h-52 border-4 border-white rounded-full opacity-90 shadow-2xl",children:(0,r.jsx)("div",{className:"w-full h-full border-2 border-blue-400 rounded-full animate-pulse shadow-lg"})}),(0,r.jsx)("div",{className:"absolute top-full mt-4 left-1/2 transform -translate-x-1/2 text-center",children:(0,r.jsx)("p",{className:"text-white text-sm font-medium bg-black bg-opacity-50 px-3 py-1 rounded-full",children:"Position your face in the circle"})})]})})]}),y&&(0,r.jsx)("div",{className:"mt-2 text-center",children:(0,r.jsx)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Camera ready - Align your face with the circle"})}),(0,r.jsxs)("div",{className:"flex justify-center gap-2 mt-4",children:[(0,r.jsx)(l.z,{variant:"outline",onClick:()=>{S(),null==a||a()},disabled:c,size:"sm",children:"Cancel"}),(0,r.jsx)(l.z,{onClick:A,className:"bg-green-600 hover:bg-green-700",disabled:c||!y,size:"sm",children:"Capture Now"})]})]}):(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"text-gray-500 mb-4",children:(0,r.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 48 48",children:(0,r.jsx)("path",{d:"M16 10a4 4 0 00-4 4v24a4 4 0 004 4h16a4 4 0 004-4V14a4 4 0 00-4-4h-4l-2-4h-4l-2 4h-4zM24 34a10 10 0 100-20 10 10 0 000 20z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsx)("p",{className:"text-lg font-medium text-gray-900 mb-2",children:w?"Face Verification":"Take Photo"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:w?"Take a selfie using your device camera":"Use your camera to take a photo"}),(0,r.jsx)(l.z,{onClick:w?E:C,className:"bg-green-600 hover:bg-green-700",disabled:c||N,children:N?"Starting...":w?"Take Selfie":"Start Camera"})]})}),(0,r.jsx)("canvas",{ref:M,className:"hidden"}),p&&(0,r.jsxs)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-700",children:[(0,r.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:p})]}),(0,r.jsx)(l.z,{variant:"outline",size:"sm",onClick:()=>v(null),className:"mt-2",children:"Dismiss"})]})]})}var c=a(7141);function VerificationResults(e){let{result:t,extractedIdData:a,error:s,isProcessing:i=!1,onRetry:n,onStartOver:o}=e;if(i)return(0,r.jsx)("div",{className:"border-none",role:"status","aria-live":"polite",children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mr-3","aria-hidden":"true"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-lg font-medium text-blue-900",children:"Processing Verification..."}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"Comparing faces using AI technology"})]})]})})});if(s)return(0,r.jsxs)("div",{className:"border-none",role:"alert","aria-live":"assertive",children:[(0,r.jsx)(c.Ol,{children:(0,r.jsxs)(c.ll,{className:"text-red-800 flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Verification Failed"]})}),(0,r.jsxs)(c.aY,{children:[(0,r.jsx)("p",{className:"text-red-700 mb-4",children:s}),(0,r.jsxs)("div",{className:"flex gap-2",children:[n&&(0,r.jsx)(l.z,{variant:"outline",onClick:n,className:"border-red-300 text-red-700 hover:bg-red-100",children:"Try Again"}),o&&(0,r.jsx)(l.z,{variant:"outline",onClick:o,className:"border-red-300 text-red-700 hover:bg-red-100",children:"Start Over"})]})]})]});if(!t)return null;let d=t.isMatch;return t.similarity,t.confidence,(0,r.jsxs)("div",{className:"border-none",role:"status","aria-live":"polite",children:[(0,r.jsx)(c.Ol,{children:(0,r.jsxs)(c.ll,{className:"flex items-center gap-2 ".concat(d?"text-green-800":"text-orange-800"),children:[d?(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d?"Identity Verified":"Identity Not Verified"]})}),(0,r.jsx)(c.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"p-4 rounded-lg ".concat(d?"bg-green-100":"bg-orange-100"),children:(0,r.jsx)("p",{className:"text-lg font-medium ".concat(d?"text-green-800":"text-orange-800"),children:d?"The face in your ID card matches your live photo":"The face in your ID card does not match your live photo"})}),d?(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"Verified Identity Information"}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Full Name"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:"John Michael Smith"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Date of Birth"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:"March 15, 1990"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"ID Number"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900 font-mono",children:"ID-789123456"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Nationality"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:"United States"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Gender"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:"Male"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Expiry Date"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:"March 15, 2030"})]}),(0,r.jsxs)("div",{className:"space-y-1 md:col-span-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Address"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:"123 Main Street, Anytown, CA 90210"})]})]}),(0,r.jsx)("div",{className:"mt-6 pt-4 border-t border-green-300",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{className:"text-green-800 font-semibold",children:"Identity Verified"})]}),(0,r.jsxs)("span",{className:"text-sm text-green-700",children:["Verified on ",new Date().toLocaleDateString()]})]})}),(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-green-300",children:(0,r.jsxs)("button",{onClick:()=>{let e={fullName:"John Michael Smith",dateOfBirth:"March 15, 1990",idNumber:"ID-789123456",nationality:"United States",gender:"Male",expiryDate:"March 15, 2030",address:"123 Main Street, Anytown, CA 90210",verificationStatus:"verified",similarity:null==t?void 0:t.similarity,confidence:null==t?void 0:t.confidence,verifiedAt:new Date().toISOString()},a="verified-id-".concat(Date.now(),".json"),r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)},className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Verified Data"]})})]})]}):d?null:(0,r.jsx)("div",{className:"border-t pt-6",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-800",children:"Identity Verification Failed"})]}),(0,r.jsx)("p",{className:"text-red-700 mb-4",children:"The identity information cannot be displayed because the face verification failed. The person in the live photo does not match the person in the ID card."})]})})]})})]})}function FileUpload(e){let{onFileSelect:t,accept:a="image/*,.pdf",maxSize:i=10,className:n,disabled:c=!1}=e,[d,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(null),[f,x]=(0,s.useState)(!1),[g,p]=(0,s.useState)(0),[v,N]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),j=(0,s.useRef)(null),validateFile=e=>{if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(e.type))return"Please select a valid file type (JPG, PNG, or PDF)";let t=1048576*i;return e.size>t?"File size must be less than ".concat(i,"MB"):null},createPreview=e=>{if(e.type.startsWith("image/")){let t=new FileReader;t.onload=e=>{var t;y(null===(t=e.target)||void 0===t?void 0:t.result)},t.readAsDataURL(e)}else y(null)},w=(0,s.useCallback)(e=>{m(null);let a=validateFile(e);if(a){m(a);return}N(e),createPreview(e),x(!0),p(0);let r=setInterval(()=>{p(a=>a>=100?(clearInterval(r),x(!1),t(e),100):a+10)},100)},[t,i]),k=(0,s.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),c||u(!0)},[c]),D=(0,s.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),u(!1)},[]),M=(0,s.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),u(!1),c)return;let t=Array.from(e.dataTransfer.files);t.length>0&&t[0]&&w(t[0])},[w,c]),I=(0,s.useCallback)(e=>{let t=e.target.files;t&&t.length>0&&t[0]&&w(t[0])},[w]),handleRemove=()=>{N(null),y(null),m(null),p(0),t(null),j.current&&(j.current.value="")};return(0,r.jsxs)("div",{className:(0,o.cn)("w-full",n),children:[(0,r.jsx)("input",{ref:j,type:"file",accept:a,onChange:I,className:"hidden",disabled:c}),(0,r.jsx)("div",{className:(0,o.cn)("relative border-2 border-dashed rounded-lg transition-all duration-200",d&&!c?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-blue-400",c&&"opacity-50 cursor-not-allowed",h&&"border-red-400 bg-red-50"),onDragOver:k,onDragLeave:D,onDrop:M,onClick:()=>{if(!c){var e;null===(e=j.current)||void 0===e||e.click()}},children:v&&b?(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0 relative",children:(0,r.jsx)("img",{src:b,alt:"Preview",className:"w-24 h-24 object-cover rounded-lg border"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"w-full space-y-1",children:[(0,r.jsx)("p",{className:"text-sm  font-medium text-gray-900 truncate",children:v.name}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[(v.size/1024/1024).toFixed(2)," MB"]}),(0,r.jsx)(l.z,{size:"sm",variant:"outline",onClick:e=>{e.stopPropagation(),handleRemove()},title:"Remove",children:"Remove"})]}),f&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[(0,r.jsx)("span",{children:"Uploading..."}),(0,r.jsxs)("span",{children:[g,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(g,"%")}})})]})]})]})}):v&&!b?(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"text-gray-500 mb-4",children:(0,r.jsxs)("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 48 48",children:[(0,r.jsx)("path",{d:"M9 12h6l3-3h12l3 3h6a3 3 0 013 3v21a3 3 0 01-3 3H9a3 3 0 01-3-3V15a3 3 0 013-3z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M23 19a4 4 0 100 8 4 4 0 000-8z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-1",children:v.name}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mb-4",children:[(v.size/1024/1024).toFixed(2)," MB"]}),f&&(0,r.jsxs)("div",{className:"max-w-xs mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[(0,r.jsx)("span",{children:"Uploading..."}),(0,r.jsxs)("span",{children:[g,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(g,"%")}})})]}),(0,r.jsx)(l.z,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),handleRemove()},className:"mt-4",children:"Remove"})]}):(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"text-gray-500 mb-4",children:(0,r.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 48 48",children:(0,r.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:d?"Drop your ID card here":"Drag and drop your ID card here, or click to browse"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mb-4",children:["Supported formats: JPG, PNG, PDF (max ",i,"MB)"]}),(0,r.jsx)(l.z,{variant:"outline",disabled:c,children:"Choose File"})]})}),h&&(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-red-600",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h]})]})}function Toast(e){let{message:t,type:a,isVisible:i,onClose:n,duration:l=3e3}=e;if((0,s.useEffect)(()=>{if(i){let e=setTimeout(()=>{n()},l);return()=>clearTimeout(e)}},[i,l,n]),!i)return null;let o={success:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),error:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),info:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}[a];return(0,r.jsxs)("div",{className:"fixed top-4 right-4 ".concat({success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"}[a]," text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 z-50 max-w-sm animate-in slide-in-from-right duration-300"),role:"alert","aria-live":"polite",children:[o,(0,r.jsx)("span",{className:"text-sm font-medium",children:t}),(0,r.jsx)("button",{onClick:n,className:"ml-2 text-white hover:text-gray-200 focus:outline-none","aria-label":"Close notification",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}function useToast(){let[e,t]=(0,s.useState)({message:"",type:"info",isVisible:!1});return{toast:e,showToast:(e,a)=>{t({message:e,type:a,isVisible:!0})},hideToast:()=>{t(e=>({...e,isVisible:!1}))}}}let UploadService=class UploadService{static async uploadFile(e,t){return new Promise((a,r)=>{let s=new FormData;s.append("file",e);let i=new XMLHttpRequest;t&&i.upload.addEventListener("progress",e=>{if(e.lengthComputable){let a=Math.round(e.loaded/e.total*100);t(a)}}),i.addEventListener("load",()=>{try{let e=JSON.parse(i.responseText);a(e)}catch(e){r(Error("Invalid response from server"))}}),i.addEventListener("error",()=>{r(Error("Upload failed"))}),i.addEventListener("timeout",()=>{r(Error("Upload timeout"))}),i.open("POST","/api/upload-id"),i.timeout=3e4,i.send(s)})}static async getFile(e){try{let t=await fetch("/api/get-file/".concat(e)),a=await t.json();if(a.success)return a;return console.error("Failed to retrieve file:",a.error),null}catch(e){return console.error("Error retrieving file:",e),null}}static async deleteFile(e){try{let t=await fetch("/api/delete-file/".concat(e),{method:"DELETE"}),a=await t.json();return a.success}catch(e){return console.error("Error deleting file:",e),!1}}static saveFileId(e){try{localStorage.setItem("kyc_uploaded_file_id",e)}catch(e){console.error("Failed to save file ID to localStorage:",e)}}static getStoredFileId(){try{return localStorage.getItem("kyc_uploaded_file_id")}catch(e){return console.error("Failed to retrieve file ID from localStorage:",e),null}}static clearStoredFileId(){try{localStorage.removeItem("kyc_uploaded_file_id")}catch(e){console.error("Failed to clear file ID from localStorage:",e)}}};let UnifiedUploadService=class UnifiedUploadService{static async uploadFile(e,t){let a=await UploadService.uploadFile(e,t);return{success:a.success,fileId:a.fileId,filename:a.filename,size:a.size,error:a.error}}static async selectAndUploadFile(){return{success:!1,error:"File selection not available on web. Use file upload instead."}}static async getFile(e){let t=await UploadService.getFile(e);return t?{fileId:t.fileId,filename:t.filename,size:t.size,mimetype:t.mimetype,dataUrl:t.dataUrl,uploadTime:t.uploadTime}:null}static async deleteFile(e){return await UploadService.deleteFile(e)}static saveFileId(e){UploadService.saveFileId(e)}static getStoredFileId(){return UploadService.getStoredFileId()}static clearStoredFileId(){UploadService.clearStoredFileId()}};let MockFaceRecognitionService=class MockFaceRecognitionService{async detectFaces(e){return(await this.delay(500+1e3*Math.random()),.05>Math.random())?[]:[{confidence:.85+.14*Math.random(),boundingBox:{left:.2+.1*Math.random(),top:.15+.1*Math.random(),width:.4+.2*Math.random(),height:.5+.2*Math.random()},landmarks:{leftEye:{x:.35,y:.4},rightEye:{x:.65,y:.4},nose:{x:.5,y:.55},leftMouth:{x:.42,y:.75},rightMouth:{x:.58,y:.75}},quality:{brightness:.7+.3*Math.random(),sharpness:.8+.2*Math.random(),pose:{roll:-5+10*Math.random(),yaw:-10+20*Math.random(),pitch:-8+16*Math.random()}}}]}async compareFaces(e,t){await this.delay(800+1200*Math.random());let a=this.config.similarityThreshold||.8,r=.1>Math.random()?.4+.3*Math.random():.75+.24*Math.random();return{similarity:r,confidence:.8+.19*Math.random(),isMatch:r>=a,threshold:a,details:{qualityScore:.75+.24*Math.random(),faceDetectionConfidence:.88+.11*Math.random(),processingTime:600+800*Math.random()}}}async validateImage(e){return(await this.delay(200+300*Math.random()),"string"==typeof e)?e.startsWith("data:image/")&&e.includes(","):e.byteLength>1e3&&e.byteLength<10485760}delay(e){return new Promise(t=>setTimeout(t,e))}constructor(e){this.config={similarityThreshold:.8,qualityThreshold:.7,maxRetries:3,timeout:5e3,...e}}};let FaceRecognitionManager=class FaceRecognitionManager{createService(e){switch(e.provider){case"aws":throw Error("AWS Rekognition not implemented yet");case"azure":throw Error("Azure Face API not implemented yet");default:return new MockFaceRecognitionService(e)}}async detectFacesInImage(e){try{let t=await this.service.validateImage(e);if(!t)throw Error("Invalid image format");let a=await this.service.detectFaces(e);return a}catch(e){throw this.handleError(e,"Face detection failed")}}async compareFaces(e,t){try{let[a,r]=await Promise.all([this.service.validateImage(e),this.service.validateImage(t)]);if(!a)throw Error("Invalid ID card image format");if(!r)throw Error("Invalid live image format");let[s,i]=await Promise.all([this.service.detectFaces(e),this.service.detectFaces(t)]);if(0===s.length)throw Error("No face detected in ID card image");if(0===i.length)throw Error("No face detected in live image");if(s.length>1)throw Error("Multiple faces detected in ID card image");if(i.length>1)throw Error("Multiple faces detected in live image");let n=await this.service.compareFaces(e,t);return n}catch(e){throw this.handleError(e,"Face comparison failed")}}async processVerification(e,t){try{let a=await this.detectFacesInImage(e),r=await this.detectFacesInImage(t),s=await this.compareFaces(e,t);return{success:!0,result:s,processingSteps:{idCardFaceDetection:a,liveFaceDetection:r,comparison:s}}}catch(t){let e=this.handleError(t,"Verification process failed");return{success:!1,result:null,error:e,processingSteps:{idCardFaceDetection:[],liveFaceDetection:[]}}}}handleError(e,t){return e instanceof Error?{code:"FACE_RECOGNITION_ERROR",message:e.message,details:e}:{code:"UNKNOWN_ERROR",message:t,details:e}}async checkImageQuality(e){try{let t=await this.service.detectFaces(e);if(0===t.length)return{isGoodQuality:!1,issues:["No face detected in image"],score:0};let a=t[0];if(!a)return{isGoodQuality:!1,issues:["No face detected in image"],score:0};let r=[],s=1;if(a.confidence<.8&&(r.push("Low face detection confidence"),s-=.2),a.quality){a.quality.brightness<.3&&(r.push("Image too dark"),s-=.2),a.quality.brightness>.9&&(r.push("Image too bright"),s-=.2),a.quality.sharpness<.6&&(r.push("Image too blurry"),s-=.3);let e=a.quality.pose;Math.abs(e.yaw)>15&&(r.push("Face turned too much to the side"),s-=.2),Math.abs(e.pitch)>15&&(r.push("Face tilted too much up or down"),s-=.2),Math.abs(e.roll)>10&&(r.push("Face rotated too much"),s-=.1)}return{isGoodQuality:s>=.6,issues:r,score:Math.max(0,s)}}catch(e){return{isGoodQuality:!1,issues:["Failed to analyze image quality"],score:0}}}constructor(e){this.config=e,this.service=this.createService(e)}};let d=new FaceRecognitionManager({provider:"mock",similarityThreshold:.8,qualityThreshold:.7,maxRetries:3,timeout:1e4});var u=a(4575),h=a(5085),m=a(5158);let TesseractOCRService=class TesseractOCRService{async initializeWorker(){if(!this.isInitialized||!this.worker)try{console.log("Initializing Tesseract worker..."),this.worker=await (0,h.createWorker)(),await this.worker.loadLanguage(this.config.language||"eng"),await this.worker.initialize(this.config.language||"eng"),await this.worker.setParameters({tessedit_pageseg_mode:"6",tessedit_char_whitelist:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789:/-., ",preserve_interword_spaces:"1"}),this.isInitialized=!0,console.log("Tesseract worker initialized successfully")}catch(e){throw console.error("Failed to initialize Tesseract worker:",e),Error("OCR initialization failed")}}async extractText(e){if(await this.initializeWorker(),!this.worker)throw Error("OCR worker not initialized");try{var t;let a=Date.now();console.log("Starting OCR text extraction...");let r=null;new Promise(e=>{let t=0;r=setInterval(()=>{(t+=10)<=90?console.log("OCR Progress: ".concat(t,"%")):(r&&clearInterval(r),e())},200)});let s=await this.worker.recognize(e);r&&clearInterval(r);let i=Date.now()-a;console.log("OCR completed in ".concat(i,"ms with confidence ").concat(s.data.confidence,"%"));let n=(null===(t=s.data.blocks)||void 0===t?void 0:t.map(e=>({text:e.text,confidence:e.confidence/100,boundingBox:{left:e.bbox.x0/s.data.width,top:e.bbox.y0/s.data.height,width:(e.bbox.x1-e.bbox.x0)/s.data.width,height:(e.bbox.y1-e.bbox.y0)/s.data.height}})))||[];return{fullText:s.data.text,blocks:n,confidence:s.data.confidence/100,processingTime:i}}catch(e){throw console.error("OCR text extraction failed:",e),Error("Text extraction failed")}}async extractIDData(e){let t=await this.extractText(e),a=(0,m.Y)(t.fullText);return this.parseIDData(t,a)}parseIDData(e,t){let a=e.fullText.toUpperCase(),r={confidence:{overall:0},rawData:e},s=[...t.patterns.name||[],/NAME[:\s]*([A-Z\s]+)/,/FULL\s*NAME[:\s]*([A-Z\s]+)/,/SURNAME[:\s]*([A-Z]+).*GIVEN\s*NAMES?[:\s]*([A-Z\s]+)/,/GIVEN\s*NAMES?[:\s]*([A-Z\s]+).*SURNAME[:\s]*([A-Z]+)/,/LAST[:\s]*([A-Z]+).*FIRST[:\s]*([A-Z\s]+)/,/FIRST[:\s]*([A-Z\s]+).*LAST[:\s]*([A-Z]+)/];for(let t of s){let s=a.match(t);if(s){if(s[1]&&s[2])r.firstName=this.cleanText(s[1]),r.lastName=this.cleanText(s[2]),r.fullName="".concat(r.firstName," ").concat(r.lastName);else if(s[1]){r.fullName=this.cleanText(s[1]);let e=r.fullName.split(" ").filter(e=>e.length>0);e.length>=2?(r.firstName=e[0],r.lastName=e.slice(1).join(" ")):1===e.length&&(r.firstName=e[0])}if(r.firstName||r.lastName){r.confidence.firstName=this.calculateFieldConfidence(e,s[0]),r.confidence.lastName=r.confidence.firstName;break}}}let i=[...t.patterns.dateOfBirth||[],/DOB[:\s]*(\d{1,2}[/-]\d{1,2}[/-]\d{2,4})/,/DATE\s*OF\s*BIRTH[:\s]*(\d{1,2}[/-]\d{1,2}[/-]\d{2,4})/,/BIRTH[:\s]*(\d{1,2}[/-]\d{1,2}[/-]\d{2,4})/,/BORN[:\s]*(\d{1,2}[/-]\d{1,2}[/-]\d{2,4})/,/(\d{1,2})\s*(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\s*(\d{4})/,/(\d{4})[/-](\d{1,2})[/-](\d{1,2})/];for(let t of i){let s=a.match(t);if(s&&(s[1]?r.dateOfBirth=this.cleanText(s[1]):s[2]&&s[3]&&(r.dateOfBirth="".concat(s[1],"/").concat(this.getMonthNumber(s[2]),"/").concat(s[3])),r.dateOfBirth)){r.confidence.dateOfBirth=this.calculateFieldConfidence(e,s[0]);break}}let n=[...t.patterns.idNumber||[],/ID[:\s]*([A-Z0-9]+)/,/ID\s*NUMBER[:\s]*([A-Z0-9]+)/,/IDENTIFICATION[:\s]*([A-Z0-9]+)/,/LICENSE[:\s]*([A-Z0-9]+)/,/DL[:\s]*([A-Z0-9]+)/,/DRIVER\s*LICENSE[:\s]*([A-Z0-9]+)/,/CARD\s*NUMBER[:\s]*([A-Z0-9]+)/];for(let t of n){let s=a.match(t);if(s&&s[1]){r.idNumber=this.cleanText(s[1]),r.confidence.idNumber=this.calculateFieldConfidence(e,s[0]);break}}let l=[...t.patterns.documentNumber||[],/PASSPORT[:\s]*([A-Z0-9]+)/,/DOCUMENT[:\s]*([A-Z0-9]+)/,/NUMBER[:\s]*([A-Z0-9]+)/];for(let t of l){let s=a.match(t);if(s&&s[1]){r.documentNumber=this.cleanText(s[1]),r.confidence.documentNumber=this.calculateFieldConfidence(e,s[0]);break}}let o=[...t.patterns.expiryDate||[],/EXP[:\s]*(\d{1,2}[/-]\d{1,2}[/-]\d{2,4})/,/EXPIRES[:\s]*(\d{1,2}[/-]\d{1,2}[/-]\d{2,4})/,/EXPIRY[:\s]*(\d{1,2}[/-]\d{1,2}[/-]\d{2,4})/,/VALID\s*UNTIL[:\s]*(\d{1,2}[/-]\d{1,2}[/-]\d{2,4})/];for(let t of o){let s=a.match(t);if(s&&s[1]){r.expiryDate=this.cleanText(s[1]),r.confidence.expiryDate=this.calculateFieldConfidence(e,s[0]);break}}let c=[...t.patterns.gender||[],/SEX[:\s]*([MF])/,/GENDER[:\s]*([MF])/,/GENDER[:\s]*(MALE|FEMALE)/];for(let t of c){let s=a.match(t);if(s&&s[1]){let t=s[1].toUpperCase();r.gender="M"===t||"MALE"===t?"Male":"Female",r.confidence.gender=this.calculateFieldConfidence(e,s[0]);break}}let d=[...t.patterns.nationality||[],/NATIONALITY[:\s]*([A-Z\s]+)/,/CITIZEN[:\s]*([A-Z\s]+)/,/COUNTRY[:\s]*([A-Z\s]+)/];for(let t of d){let s=a.match(t);if(s&&s[1]){r.nationality=this.cleanText(s[1]),r.confidence.nationality=this.calculateFieldConfidence(e,s[0]);break}}for(let t of[/ADDRESS[:\s]*([A-Z0-9\s,]+)/,/ADDR[:\s]*([A-Z0-9\s,]+)/,/RESIDENCE[:\s]*([A-Z0-9\s,]+)/]){let s=a.match(t);if(s&&s[1]){r.address=this.cleanText(s[1]),r.confidence.address=this.calculateFieldConfidence(e,s[0]);break}}let u=Object.values(r.confidence).filter(e=>"number"==typeof e&&e>0);return r.confidence.overall=u.length>0?u.reduce((e,t)=>e+t,0)/u.length:Math.max(.3,e.confidence-.2),r}calculateFieldConfidence(e,t){let a=e.blocks.filter(e=>e.text.toUpperCase().includes(t.toUpperCase()));if(0===a.length)return .8*e.confidence;let r=a.reduce((e,t)=>e+t.confidence,0)/a.length;return Math.min(r,e.confidence)}getMonthNumber(e){return({JAN:"01",FEB:"02",MAR:"03",APR:"04",MAY:"05",JUN:"06",JUL:"07",AUG:"08",SEP:"09",OCT:"10",NOV:"11",DEC:"12"})[e.toUpperCase()]||"01"}cleanText(e){return e.trim().replace(/\s+/g," ").replace(/[^\w\s\-/]/g,"").toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}validateExtractedData(e){let t=e.firstName&&e.lastName||e.fullName,a=e.dateOfBirth,r=e.idNumber||e.documentNumber,s=e.confidence.overall>=(this.config.confidenceThreshold||.7);return!!(t&&a&&r&&s)}async cleanup(){this.worker&&(await this.worker.terminate(),this.worker=null,this.isInitialized=!1,console.log("Tesseract worker terminated"))}constructor(e){this.worker=null,this.isInitialized=!1,this.config={confidenceThreshold:.7,timeout:3e4,language:"eng",...e}}};let OCRManager=class OCRManager{createService(e){switch(e.provider){case"tesseract":return new TesseractOCRService(e);case"aws-textract":throw Error("AWS Textract not implemented yet");default:return new u.MockOCRService(e)}}async processIDCard(e){try{let t=await this.service.extractText(e),a=(0,m.Y)(t.fullText),r=await this.service.extractIDData(e),s=this.service.validateExtractedData(r),i=Object.keys(r).filter(e=>r[e]&&"confidence"!==e&&"rawData"!==e);return{success:s,data:r,processingSteps:{ocrResult:t,detectedFormat:a.name,extractedFields:i,validationResult:s}}}catch(t){console.error("OCR processing failed, falling back to mock service:",t);try{let{MockOCRService:t}=await Promise.resolve().then(a.bind(a,4575)),r=new t(this.config),s=await r.extractText(e),i=(0,m.Y)(s.fullText),n=await r.extractIDData(e),l=r.validateExtractedData(n),o=Object.keys(n).filter(e=>n[e]&&"confidence"!==e&&"rawData"!==e);return{success:l,data:n,error:"Using mock data due to OCR service issues",processingSteps:{ocrResult:s,detectedFormat:i.name,extractedFields:o,validationResult:l}}}catch(e){return{success:!1,data:null,error:t instanceof Error?t.message:"OCR processing failed",processingSteps:{}}}}}async extractText(e){return this.service.extractText(e)}async extractIDData(e){return this.service.extractIDData(e)}validateExtractedData(e){return this.service.validateExtractedData(e)}formatDate(e){if(!e)return null;for(let t of[/(\d{1,2})[/-](\d{1,2})[/-](\d{2,4})/,/(\d{1,2})\s+([A-Z]{3})\s+(\d{4})/i,/(\d{4})[/-](\d{1,2})[/-](\d{1,2})/]){let a=e.match(t);if(a){if(/(\d{1,2})[/-](\d{1,2})[/-](\d{2,4})/===t){let[,e,t,r]=a,s=r&&2===r.length?"20".concat(r):r;if(e&&t&&s){if(parseInt(e)>12)return"".concat(t.padStart(2,"0"),"/").concat(e.padStart(2,"0"),"/").concat(s);return"".concat(e.padStart(2,"0"),"/").concat(t.padStart(2,"0"),"/").concat(s)}}else if(/(\d{1,2})\s+([A-Z]{3})\s+(\d{4})/i===t){let[,e,t,r]=a,s={JAN:"01",FEB:"02",MAR:"03",APR:"04",MAY:"05",JUN:"06",JUL:"07",AUG:"08",SEP:"09",OCT:"10",NOV:"11",DEC:"12"},i=s[(null==t?void 0:t.toUpperCase())||""];if(i&&e)return"".concat(i,"/").concat(e.padStart(2,"0"),"/").concat(r)}else if(/(\d{4})[/-](\d{1,2})[/-](\d{1,2})/===t){let[,e,t,r]=a;if(t&&r)return"".concat(t.padStart(2,"0"),"/").concat(r.padStart(2,"0"),"/").concat(e)}}}return null}calculateAge(e){let t=this.formatDate(e);if(!t)return null;let[a,r,s]=t.split("/");if(!a||!r||!s)return null;let i=new Date(parseInt(s),parseInt(a)-1,parseInt(r)),n=new Date,l=n.getFullYear()-i.getFullYear(),o=n.getMonth()-i.getMonth();return(o<0||0===o&&n.getDate()<i.getDate())&&l--,l}isDateExpired(e){let t=this.formatDate(e);if(!t)return!1;let[a,r,s]=t.split("/");if(!a||!r||!s)return!1;let i=new Date(parseInt(s),parseInt(a)-1,parseInt(r)),n=new Date;return i<n}getDataQualityScore(e){let t=[],a=[],r=100;return e.confidence.overall<.8&&(t.push("Low overall confidence in extracted data"),a.push("Try uploading a clearer image with better lighting"),r-=20),e.firstName&&e.lastName||(t.push("Name information incomplete"),a.push("Ensure the name on the ID is clearly visible"),r-=25),e.dateOfBirth||(t.push("Date of birth not detected"),a.push("Make sure the date of birth is clearly visible"),r-=25),e.idNumber||e.documentNumber||(t.push("ID/Document number not detected"),a.push("Ensure the ID number is clearly visible and not obscured"),r-=25),e.dateOfBirth&&!this.formatDate(e.dateOfBirth)&&(t.push("Invalid date of birth format"),a.push("Check if the date of birth is clearly readable"),r-=15),e.expiryDate&&this.isDateExpired(e.expiryDate)&&(t.push("Document appears to be expired"),a.push("Please use a valid, non-expired document"),r-=10),{score:Math.max(0,r),issues:t,suggestions:a}}constructor(e){this.config=e,this.service=this.createService(e)}};let f={provider:"mock",language:"eng",confidenceThreshold:.7,timeout:3e4};function Verify(){let[e,t]=(0,s.useState)(null),[a,i]=(0,s.useState)(null),[o,c]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),[m,x]=(0,s.useState)(!1),[g,p]=(0,s.useState)(null),[v,N]=(0,s.useState)(null),[b,y]=(0,s.useState)(!1),[j,w]=(0,s.useState)(null),[k,D]=(0,s.useState)(!1),[M,I]=(0,s.useState)(null),[E,C]=(0,s.useState)(!1),[S,A]=(0,s.useState)("upload"),[T,R]=(0,s.useState)(null),[F,L]=(0,s.useState)(!1),[O,U]=(0,s.useState)(0),[B,P]=(0,s.useState)(null),[z]=(0,s.useState)(new OCRManager(f)),{toast:Y,showToast:Z,hideToast:V}=useToast();(0,s.useEffect)(()=>{let e=UnifiedUploadService.getStoredFileId();e&&(t(e),UnifiedUploadService.getFile(e).then(e=>{e?i(e):UnifiedUploadService.clearStoredFileId()}))},[]);let handleVerificationWithData=async e=>{if(a&&e){x(!0),N(null),p(null),y(!0);try{let r=await d.processVerification(a.dataUrl,e);if(r.success&&r.result)p(r.result);else{var t;N((null===(t=r.error)||void 0===t?void 0:t.message)||"Verification failed")}}catch(e){N(e instanceof Error?e.message:"An unexpected error occurred")}finally{x(!1)}}},handleFaceCapture=async e=>{h(e),e?a&&await handleVerificationWithData(e):(p(null),N(null),y(!1))},handleUploadConfirm=async()=>{if(T||o){L(!0),U(0),P(null);try{let e;if(o)e=await UnifiedUploadService.selectAndUploadFile();else{if(!T)return;e=await UnifiedUploadService.uploadFile(T,U)}if(e.success&&e.fileId){UnifiedUploadService.saveFileId(e.fileId);let a=await UnifiedUploadService.getFile(e.fileId);a&&(t(a.fileId),i(a),Z("ID card uploaded successfully!","success"),A("camera"),R(null))}else P(e.error||"Upload failed")}catch(e){P(e instanceof Error?e.message:"Upload failed")}finally{L(!1),U(0)}}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n(),{children:[(0,r.jsx)("title",{children:"Verify Identity - KYC Compare ID Card"}),(0,r.jsx)("meta",{name:"description",content:"Start your identity verification process by uploading your ID card and taking a live photo"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"icon",href:"/logo-seksaa.jpg"})]}),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsxs)("main",{className:"px-4 py-6",role:"main",children:[(0,r.jsxs)("div",{className:"flex-wrap flex gap-2 justify-center text-center p-3",children:[(0,r.jsx)("a",{target:"_blank",href:"https://www.facebook.com/SeksaaTechacAdemy",children:(0,r.jsx)("img",{className:"w-24 h-24 rounded-full",src:"/logo-seksaa.jpg",alt:"logo"})}),(0,r.jsx)("h2",{className:" text-3xl sm:text-4xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent sm:mb-4 leading-tight",children:(0,r.jsx)("a",{target:"_blank",href:"https://www.facebook.com/SeksaaTechacAdemy",children:"Seksaa Tech Academy"})}),(0,r.jsx)("p",{className:"text-base sm:text-lg text-gray-600 max-w-md mx-auto leading-relaxed",children:(0,r.jsx)("a",{target:"_blank",href:"https://www.facebook.com/SeksaaTechacAdemy",children:"Innovative Face Recognition Technology"})}),(0,r.jsx)("div",{className:"inline-flex items-center rounded-lg focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent hover:bg-primary/80 relative w-fit mx-auto py-3 px-6 text-base font-semibold bg-gradient-to-r from-emerald-500 to-cyan-500 text-white border-0 shadow-lg transform hover:scale-105 transition-all duration-300",children:"✨ Demo Version"})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-1 mb-4 mt-2",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("button",{onClick:()=>A("upload"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg text-sm font-medium transition-all ".concat("upload"===S?"bg-blue-500 text-white shadow-sm":"text-gray-600 hover:text-gray-900"),children:[a?(0,r.jsx)("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload ID"]}),(0,r.jsxs)("button",{onClick:()=>{A("camera"),p(null),N(null),y(!1)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg text-sm font-medium transition-all ".concat("camera"===S?"bg-blue-500 text-white shadow-sm":"text-gray-600 hover:text-gray-900"),children:[u?(0,r.jsx)("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Face Scan"]})]})}),(0,r.jsx)("div",{className:"space-y-6",children:"upload"===S?(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Upload ID Card"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Take a photo or upload your government ID"})]})]}),o?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-gray-500 mb-4",children:(0,r.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 48 48",children:(0,r.jsx)("path",{d:"M16 10a4 4 0 00-4 4v24a4 4 0 004 4h16a4 4 0 004-4V14a4 4 0 00-4-4h-4l-2-4h-4l-2 4h-4zM24 34a10 10 0 100-20 10 10 0 000 20z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsx)("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select ID Card Photo"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Choose a photo from your device gallery"})]}):(0,r.jsx)(FileUpload,{onFileSelect:e=>{R(e),P(null)},accept:"image/jpeg,image/jpg,image/png,application/pdf",maxSize:10,disabled:F}),F&&(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Uploading..."}),(0,r.jsxs)("span",{className:"text-blue-600 font-medium",children:[O,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(O,"%")}})})]}),B&&(0,r.jsx)("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-red-700 text-sm",children:B})}),(T||o)&&(0,r.jsx)(l.z,{onClick:handleUploadConfirm,disabled:F,className:"w-full mt-4 bg-blue-600 hover:bg-blue-700 h-12 text-base",children:F?"Processing...":o?"Select ID Card Photo":"Upload ID Card"})]})}):(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Face Verification"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Take a live selfie for identity matching"})]})]}),"camera"===S&&a?(0,r.jsx)("div",{children:(0,r.jsx)(AutoCamera,{onImageCapture:handleFaceCapture,onCancel:()=>A("upload"),autoStart:!0})}):"camera"===S?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[(0,r.jsxs)("svg",{className:"w-16 h-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0118.07 7H19a2 2 0 012 2v9a2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,r.jsx)("p",{className:"text-gray-600 text-center mb-4",children:"Please upload your ID card first"}),(0,r.jsx)(l.z,{onClick:()=>A("upload"),className:"bg-blue-600 hover:bg-blue-700",children:"Upload ID Card"})]}):null]}),b&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(VerificationResults,{result:g,extractedIdData:j,error:v,isProcessing:m,onRetry:()=>{N(null),p(null),y(!1)},onStartOver:()=>{i(null),h(null),p(null),N(null),y(!1),w(null),I(null),C(!1),A("camera"),R(null),P(null)}})})]})})]}),(0,r.jsx)(Toast,{message:Y.message,type:Y.type,isVisible:Y.isVisible,onClose:V})]})]})}new OCRManager(f)}},function(e){e.O(0,[811,85,774,888,179],function(){return e(e.s=8362)}),_N_E=e.O()}]);